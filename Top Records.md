# 准备数据
## 下载数据
终于，可以使用SteamDB上提供的下载渠道直接下载数据集了。SteamDB提供单个游戏的历史在线人数数据集下载为.csv和.xls文件的两个下载通道。我们分别下载Steam游戏在线人数历史峰值Top3的PUBG、CS:GO、Dota2的历史在线人数.csv数据集即可。<br>
项目中所包含的.csv文件更新时间截止2023年5月3日，如果不能用以上方法下载到数据，可以使用项目中的.csv文件。
## 数据集简介
以Lifetime players count history-CSGO数据集为例，该数据集包含四列数据：DateTime日期，Players今日玩家数量峰值，Average Players今日玩家数量均值，Flags法定节假日标识。但其余两个数据集只包含除Average Players的三列数据，这是因为CS:GO长期的火爆和稳定的流量使得它的玩家游戏数量均值更有参考和分析价值。我们接下来进行分析和可视化的时候仅选择DateTime和Players两列数据即可。
## 加载数据
下载上述三个数据集至指定路径之后，我们定义一个加载函数和数据字典来简化加载数据的步骤，使其而无需重复代码。
## 数据预处理
分别打印三个数据集的DateTime和Players属性时发现三个数据集的大小是不一致的：Lifetime players count history-PUBG有2283行数据，Lifetime players count history-CSGO有4173行数据，Lifetime players count history-Dota 2则有多达4242行数据。因此，我们需要统一长度为最大值4242，具体做法是使用Dota 2数据集中的日期和0来分别填充其余两个数据集的DateTime和Players。
## 转换数据
此时得到的新的x和y虽然长度满足了要求，但仍然存在数据类型上的问题，需要进行进一步的数据转换，直到打印x和y与x3、y3格式完全一致为止。
# 可视化数据
我们创建一个一行两列包含两个字图的图表对象来分别绘制堆叠柱形图和三折线图。
# 分析摘要
我在编辑这个程序的过程中发现，运行该程序对计算资源的消耗相较于我所接触过的程序和数据集已经非常大了：两个4000余行的数据集和一个2000余行的数据集，我的电脑每每运行到该程序可视化数据的单元的时候，风扇声可闻地变大，发出非常明显的轰鸣……不仅如此，运行plt.show打开窗口的速度也是奇慢。就此，我决定导入time包来计算整个程序运行耗时，发现在笔记本连接电源的情况下耗时约14.9s，未连接电源耗时约40.2s。这，这难道就是大数据的力量！不不，我当然知道这样的数据体量还远远称不上是大数据的程度，这个时候云资源就显得尤为可贵了——毕竟使用软件资源的成本总是低于使用硬件资源的。<br>
回到图像当中来，我们根据堆叠柱形图和三折线图来分析Steam游戏在线人数历史峰值排行榜TOP3，即PUBG、CS:GO、Dota 2的平均在线人数随时间的变化趋势。其中，PUBG的上线时间是2017年，相较于CS:GO和Dota 2要晚上许多，但自它发售以来，很快就对中国地区和全世界产生了极其深远的影响，甚至一度改变了当时网吧的格局。PUBG的来势汹涌，甚至一度超越了CS:GO和Dota 2两大常青树，但退潮也很汹涌，这一现象背后的原因其实值得我们深究：是什么导致PUBG的用户留存率急转直下，如今的平均在线玩家已不足峰值的15％？
## 为什么说PUBG: BATTLEGROUNDS浪潮已经退去？
### 竞争激烈
峰值在线是在2018年1月，达到了323,6027人，同时平均在线人数也达到峰值，这一数据也让游戏业界嗅到了商机，做出了许多大逃杀类型的网游。在这样的背景下，美国游戏巨头EA旗下的重生娱乐，也就是开发《使命召唤》系列IP的开发商制作出了现在爆火的Apex。
### 软锁国区
当时，新颖的游戏模式加之直播平台影响力的加持，PUBG在发行后没多久就迎来了峰值在线，彼时大量的中国玩家，当时称作“红衣军”，还有一些“神仙”，说直白一些就是开了外挂的人涌入其中，给游戏平衡带来了不小的影响，开发商火速将国区变相封锁。
### 游戏性差
游戏开发商过于重视游戏真实性却始终没有正视游戏本身的缺陷，对许多游戏性不好的体验熟视无睹，不想办法提高玩家的游戏体验——不仅限于玩家的操作手感，游戏的画面节奏，还包括上面所说到的外挂人群，却把大量精力投入到了打造电竞化上。另外，开发商始终没有对游戏整体的玩法重新进行构思和补充，也难怪PUBG的创意总监是一个野路子的门外汉，出品的游戏更偏向于自己的喜好……
## 为什么数据集在同一时间出现了大体量的数据缺失？
另外，图像中每一幅图都出现了一处明显的落差。我们检查数据发现，实际上是在2015年3月前后存在大量的数据缺失。由于PUBG的发售时间偏晚，大量的数据缺失在同一时间出现在CS:GO和Dota 2中。<br>
经过我的主观推测，可能有两个原因：<br>
a)	我们猜测SteamDB或Steam在这段时间内停止了相关的数据服务以进行内部优化，但SteamDB是一个社区，数据全部直接来自于Steam，并且该过程是完全自动化的，除非开发人员需要修复数据，否则不会手动编辑数据，故我更偏向于相信可能是Steam Web API或SteamKit在这段时间内禁止了相关服务；<br>
b)	考虑到CS:GO和Dota 2开发人员和发行商都是Valve，我浏览了Valve的社交媒体官方账号对应时间发布的内容，可惜Valve的官推无法查询到2019年11月19日以前的内容，因此我们只能猜测两款游戏在同一时间出现如此大体量的数据缺失可能是这段时间内Valve发生了重要的事件无法支持对于两款游戏的运营，因此进行了停服维护。
